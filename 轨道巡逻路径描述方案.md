# 轨道巡逻路径描述方案
## 不变轨方案

不变轨指只有一根轨道，所有运动都在一根轨道上进行

所有轨道参数只考虑二维平面，同样运动也只考虑二维平面

### 轨道描述

需要对轨道的坐标和形态进行描述

#### 坐标描述

需要给定在世界坐标下的锚点以及角度信息（这里在测试中可以为0）（这里会得到一个由局部坐标到世界坐标的一个映射关系）

#### 形态描述

* 方案一：采用解析式，解析式在空间中的映射会加上锚点的平移
* 方案二：采用栅格地图，其中栅格地图的像素密度应该比轨道实际宽度小（适用于难以写出解析式轨道）

#### 方向定义

在实际编码的时候，遇见了一个比较难以处理的问题，就是如何定义轨道的正方向

目前采取的方案比较别扭，选取与云台yaw轴夹角更小的方向作为正方向，另一个方向则作为反方向

### 底盘位置描述（或运动描述）

* 针对解析式，可以直接给出底盘相对于轨道的速度，该速度应该是底盘坐标、相对运动距离的函数或者是常数

根据简单的数学公式，这里可以得到，在全局坐标下，物体的速度为


$v_x=\frac{v_{轨}}{\sqrt{1+(y`_x)^2}}$
$v_y=\frac{v_{轨}}{\sqrt{1+(x`_y)^2}}$


* 针对栅格地图，需要直接给出速度和位置的关系，这里的映射关系和上图中近似，只是方向导数需要在图上进行求取

### 云台位姿描述

* 采用位姿绝对值进行描述，其给出的形式应该是位姿关于底盘坐标和时间的函数
* pitch轴采用如图坐标系

![pitch坐标系定义](/img/pitch_linker.png)

* yaw轴坐标轴采用东北天方向

### 代码描述方案



## 变轨方案